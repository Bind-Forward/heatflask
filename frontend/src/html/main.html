<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="robots" content="noindex" />

    <title data-bind="app-title" data-prop="innerText" data-class="info">
      Heatflask
    </title>

    <link rel="shortcut icon" href="../images/favicon.ico" />
  </head>

  <body>
    <div id="sidebar" class="sidebar collapsed" data-class="current-user" data-bind="id" data-attr="data-authenticated">
      <!-- Nav tabs -->
      <div class="sidebar-tabs">
        <ul role="tablist">
          <li>
            <a href="#home" role="tab"><i class="fa fa-bars"></i></a>
          </li>

          <li>
            <a href="#activities" role="tab"><i class="fa fa-list"></i></a>
          </li>

          <!-- Only show this tab if current user is authenticated -->
          <li class="logged-in" data-class="current-user" data-bind="id" data-attr="data-authenticated">
            <a href="#profile" role="tab"><i class="fa fa-user"></i></a>
          </li>

          <li>
            <a href="#controls" role="tab"><i class="fa fa-sliders-h"></i></a>
          </li>

          <li>
            <a href="#info-pane" role="tab"><i class="fa fa-info"></i></a>
          </li>
        </ul>
      </div>

      <!-- Tab panes -->
      <div class="sidebar-content">
        <!-- Main Query tab -->
        <div class="sidebar-pane" id="home">
          <h1 class="sidebar-header">
            <a
              href="#"
              data-bind="strava-url"
              data-prop="href"
              data-class="target-user"
              target="_blank"
            >
              <button class="strava-badge"></button>
            </a>

            <span
              data-bind="username"
              data-prop="innerText"
              data-class="target-user"
            >
              (user)</span
            >'s map

            <span class="sidebar-close">
              <i class="fa fa-caret-left"></i>
            </span>
          </h1>

          <h3>Activities query:</h3>

          <span class="query days activities" data-bind="queryType" data-attr="data-queryType" data-event="none">
            <input
              type="number"
              value="0"
              min="0"
              max="500"
              data-bind="quantity"
              data-class="query"
            />
            most
          </span>

          <select data-bind="queryType" data-class="query">
            <option value="days"> recent days</option>
            <option value="activities" selected> recent activities</option>
            <option value="ids">Activity IDs</option>
            <option value="dates">Date-Range</option>
            <option value="key">Key</option>
          </select>

          <br />
          <div class="query key" data-bind="queryType" data-attr="data-queryType" data-event="none">
            <input type="text" value="" data-bind="key" data-class="query" />
          </div>

          <div class="query ids" data-bind="queryType" data-attr="data-queryType" data-event="none">
            <textarea data-bind="ids" data-prop="innerText" data-class="query">
            </textarea>
          </div>

          <div class="query dates" data-bind="queryType" data-attr="data-queryType" data-event="none">
            Start:
            <input type="date" data-bind="date1" data-class="query" />
            <br />
            End:
            <input type="date" data-bind="date2" data-class="query" />
          </div>

          <br />

          <label>
            <input
              type="checkbox"
              data-bind="autozoom"
              data-prop="checked"
              data-class="visual"
            />
            Auto-Zoom to query
          </label>

          <br />
          <div
            data-bind="data-message"
            data-prop="innerHTML"
            data-class="info"
          ></div>

          <div class="progress">
            <!-- <progress class="progbar"></progress> -->
          </div>
          <br />

          <button
            type="button"
            class="btn btn-a btn-sm smooth"
            data-action="render"
          >
            Render Layers
          </button>

          <button
            type="button"
            class="btn btn-c btn-sm smooth"
            data-action="abort-render"
          >
            Abort
          </button>

          <br />

          <!-- Displayed if current-user is logged-in -->
          <div class="logged-in" data-class="current-user" data-bind="id" data-attr="data-authenticated">
            You are authenticated as
            <a
              href="#"
              target="_blank"
              data-bind="strava-url"
              data-prop="href"
              data-class="current-user"
            >
              <span
                data-class="current-user"
                data-bind="username"
                data-prop="innerText"
                >(current-user)</span
              >
            </a>
            <br /><br />

            <button type="button" class="btn btn-c btn-sm" data-action="logout">
              Log Out
            </button>
          </div>

          <br />

          <!-- Displayed if current-user is not logged-in -->
          <div class="logged-out" data-class="current-user" data-bind="id" data-attr="data-authenticated">
            Create an account and/or log in.
            <br />

            <!-- https://stackoverflow.com/questions/8683528/embed-image-in-a-button-element -->
            <button class="strava-auth" data-action="login"></button>
          </div>

          <div
            data-bind="error-message"
            data-prop="innerHTML"
            data-class="info"
          ></div>
          <br />

          <div class="paypal-form"></div>
          <br />

          <a href="mailto:info@heatflask.com">Contact us!</a>
        </div>

        <!-- Profile & User Settings Tab -->
        <div class="sidebar-pane" id="profile">
          <h1 class="sidebar-header">
            <a
              href="#"
              target="_blank"
              data-bind="strava-url"
              data-prop="href"
              data-class="current-user"
            >
              <img class="strava-badge" />
            </a>

            <span
              data-bind="username"
              data-prop="innerText"
              data-class="current-user"
            ></span>

            <span class="sidebar-close">
              <i class="fa fa-caret-left"></i>
            </span>
          </h1>

          <h3>
            <span
              data-bind="firstname"
              data-prop="innerText"
              data-class="current-user"
              >first</span
            >
            <span
              data-bind="lastname"
              data-prop="innerText"
              data-class="current-user"
              >last</span
            >
          </h3>

          <a href="https://www.strava.com/settings/profile" target="_blank">
            <img data-bind="avatar" data-prop="src" data-class="current-user" />
          </a>

          <br /><br />
          We index your activity summaries for fast access.
          <br />

          <button
            type="button"
            class="btn btn-a btn-sm"
            data-action="activity-list"
          >
            View index
          </button>
          <br />
          <hr />

          <div>
            <label
              ><input
                type="checkbox"
                data-bind="public"
                data-prop="checked"
                data-class="current-user"
              />
              Include me in the
              <a
                href="#"
                target="_blank"
                data-bind="public-users-url"
                data-prop="href"
                data-class="info"
              >
                public user directory
              </a>
            </label>
          </div>

          <br /><br /><br />

          <button type="button" data-action="logout" class="btn btn-c btn-sm">
            Log Out
          </button>

          <br />
          <hr />
          <br /><br />

          <button type="button" data-action="delete" class="btn btn-c btn-sm">
            Delete Account
          </button>

          <input
            type="button"
            class="btn btn-c btn-sm"
            value="Delete Account"
          />

          <br />
          <div class="paypal-form"></div>
        </div>

        <!-- App Info Tab -->
        <div class="sidebar-pane" id="info-pane">
          <h1 class="sidebar-header">
            Info
            <span class="sidebar-close">
              <i class="fa fa-caret-left"></i>
            </span>
          </h1>

          <div id="info-tab"></div>
        </div>

        <!-- Activity List/Table Tab -->
        <div class="sidebar-pane" id="activities">
          <h1 class="sidebar-header">
            Rendered Activities
            <span class="sidebar-close">
              <i class="fa fa-caret-left"></i>
            </span>
          </h1>
          <button
            type="button"
            class="btn btn-b btn-sm"
            data-action="selection-clear"
          >
            Clear Selection
          </button>

          <button
            type="button"
            class="btn btn-a btn-sm"
            data-action="selection-render"
          >
            Render selected
          </button>

          <br /><br />

          <input
            type="checkbox"
            data-bind="selection-zoom"
            data-prop="checked"
            dtata-class="visual"
          />
          Zoom to selection

          <div>
            <table id="activitiesList"></table>
          </div>
        </div>

        <!-- Controls Tab -->
        <div class="sidebar-pane" id="controls">
          <h1 class="sidebar-header">
            Layer Settings
            <span class="sidebar-close">
              <i class="fa fa-caret-left"></i>
            </span>
          </h1>

          <div>
            <h4>System Constants</h4>

            <div>
              <input
                type="range"
                class="dot-const"
                id="dot-speed"
                data-bind="speed"
                data-class="visual"
                data-event="input"
              />
              <label for="dot-speed"
                >Speed <span data-bind="speed" data-class="visual" data-prop="innerText"></span
              ></label>
            </div>
            <div>
              <input
                type="range"
                class="dot-const"
                id="dot-sep"
                data-bind="sep"
                data-class="visual"
                data-event="input"
              />
              <label for="dot-sep"
                >Sparsity <span data-bind="sep" data-prop="innerText" data-class="visual"></span
              ></label>
            </div>

            <span>
              Period T =
              <span
                data-bind="period"
                data-prop="innerText"
                data-class="info"
              ></span>
              sec
            </span>

            <div>
              <input
                type="range"
                min="0"
                max="1"
                step="0.01"
                class="dot-const"
                id="dot-alpha"
                data-bind="alpha"
                data-event="input"
                data-class="visual"
              />
              <label for="dot-alpha"
                >Alpha <span data-bind="alpha" data-prop="innerText" data-class="visual"></span
              ></label>
            </div>
            <div>
              <input
                type="range"
                min="0.1"
                max="10"
                step="0.1"
                class="dot-const"
                id="dot-size"
                data-bind="sz"
                data-event="input"
                data-class="visual"
              />
              <label for="dot-size"
                >Size <span data-bind="sz" data-prop="innerText" data-class="visual"></span
              ></label>
            </div>

            <span>
              <input
                type="checkbox"
                id="showPaths"
                data-bind="paths"
                data-prop="checked"
                data-class="visual"
                checked
              />
              <label for="showPaths">Show Paths</label>
            </span>

            <span>
              <input
                type="checkbox"
                id="showShadows"
                data-bind="shadows"
                data-prop="checked"
                data-class="visual"
                checked
              />
              <label for="showShadows">Shadows (CPU intensive)</label>
            </span>
          </div>
        </div>
      </div>
    </div>

    <div id="map" class="sidebar-map"></div>
  </body>

  <!--
   The backend server attaches a json string called args.  We parse it here so
     it will be available to our scripts as window["_args"]
 -->
  <!--  <script>
    window["argstring"] = "{{ args | tojson | safe }}";
  </script> -->

  <script src="../js/main.js"></script>
</html>
